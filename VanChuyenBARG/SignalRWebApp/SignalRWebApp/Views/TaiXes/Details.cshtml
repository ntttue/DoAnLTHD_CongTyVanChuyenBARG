@model SignalRWebApp.Models.TaiXe

@{
    ViewBag.Title = "Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Details</h2>

<div>
    <h4>TaiXe</h4>
    <hr />
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.HoTen)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.HoTen)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Lat)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Lat)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Lng)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Lng)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.TrangThai)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.TrangThai)
        </dd>

    </dl>
</div>
<p>
    @Html.ActionLink("Edit", "Edit", new { id = Model.id }) |
    @Html.ActionLink("Back to List", "Index")
</p>
<div>
    <input type="text" id="txtMessage" />
    <input type="button" id="btnSend" value="Send" />
    <input type="hidden" id="txtUserName" />

    <ul id="lstChat"></ul>
</div>
@section scripts {

    <script src="~/Scripts/jquery.signalR-2.2.0.min.js"></script>
    <script src="~/signalr/hubs"></script>
    <script type="text/javascript">
        $(function () {
            var chatHub = $.connection.chatHub;

            chatHub.client.notifyMessage = function (userName, message) {

                $('#lstChat').append(
                    '<li>' + userName + ':' + message + '</li>');

            };
            chatHub.client.NotifyForSomeOne = function (message) {

                $('#lstChat').append(
                    '<li>' + "Có khách" + ':' + message + '</li>');

            };

            $('#txtUserName').val(prompt('Enter your name:', ''));

            $.connection.hub.start().done(function () {

                chatHub.server.connect($('#txtUserName').val());

                $('#btnSend').click(function () {
                    chatHub.server.send($('#txtUserName').val()
                        , $('#txtMessage').val());
                });
            });

        });
    </script>
}
